{"version":3,"sources":["webpack:///./src/views/SignUp.vue","webpack:///./src/views/SignUp.vue?c362"],"names":["class","type","placeholder","signUp","method","id","username","required","password","data","undefined","nom","prenom","methods","sendCredentials","login","this","fetch","headers","body","JSON","stringify","then","res","json","success","token","localStorage","setItem","console","log","window","location","replace","catch","error","firstname","lastname","render"],"mappings":"4IACSA,MAAM,Q,EAEH,eAAoB,UAAhB,eAAW,G,EACf,eAEM,YADF,eAAqC,SAA9BC,KAAK,OAAOC,YAAY,U,KAEnC,eAEM,YADF,eAAwC,SAAjCD,KAAK,OAAOC,YAAY,a,KAQnC,eAA4D,UAApDD,KAAK,SAASD,MAAM,iBAAgB,WAAO,G,gDAf3D,eAiBM,MAjBN,EAiBM,CAhBF,eAeO,QAfA,SAAM,+CAAU,EAAAG,WAAM,cAAIH,MAAM,MAAMI,OAAO,Q,CAChD,EACA,EAGA,EAGA,eAEM,Y,eADF,eAAoF,SAA7EH,KAAK,OAAOI,GAAG,W,qDAAoB,EAAAC,SAAQ,IAAEC,SAAA,GAASL,YAAY,Y,mBAA/B,EAAAI,cAE9C,eAEM,Y,eADF,eAAwF,SAAjFL,KAAK,W,qDAAoB,EAAAO,SAAQ,IAAEH,GAAG,WAAWE,SAAA,GAASL,YAAY,Y,mBAA7C,EAAAM,cAEpC,G,wCAMG,GACbC,KADa,WAEX,MAAO,CACLH,cAAUI,EACVF,cAAUE,EACVC,SAAKD,EACLE,YAAQF,IAGZG,QAAS,CACPC,gBADO,WACY,WACXC,EAAQC,KAAKV,SACbE,EAAWQ,KAAKR,SACtBS,MAAM,0CAA2C,CAC/Cb,OAAQ,OACRc,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBN,QACAP,eAGDc,MAAK,SAAAC,GAAE,OAAKA,EAAIC,UAChBF,MAAK,YAAwB,IAArBG,EAAqB,EAArBA,QAASC,EAAY,EAAZA,OACA,IAAZD,IACFE,aAAaC,QAAQ,QAASF,GAC9BC,aAAaC,QAAQ,WAAY,EAAKtB,UACtCuB,QAAQC,IAAI,WACZC,OAAOC,SAASC,QAAQ,SAG3BC,OAAM,SAAAC,GAAW,EAAKA,MAAQA,MAEnChC,OAzBO,WAyBG,WACFY,EAAQC,KAAKV,SACbE,EAAWQ,KAAKR,SAChB4B,EAAYpB,KAAKJ,OACjByB,EAAWrB,KACjBa,QAAQC,IAAI,uBACZb,MAAM,qCAAsC,CAC1Cb,OAAQ,OACRc,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBN,QACAP,WACA4B,YACAC,eAGDf,MAAK,SAAAC,GAAE,OAAKA,EAAIC,UAChBF,MAAK,YAAiB,IAAdG,EAAc,EAAdA,QACHA,GACF,EAAKX,qBAGRoB,OAAM,SAAAC,GAAW,EAAKA,MAAQA,QC7EvC,EAAOG,OAASA,EAED","file":"js/chunk-2d0d338e.513f8d9f.js","sourcesContent":["<template>\r\n    <div class=\"home\">\r\n        <form @submit.prevent=\"signUp()\" class=\"box\" method=\"POST\">\r\n            <h1>Inscription</h1>\r\n            <div>\r\n                <input type=\"text\" placeholder=\"Nom\">\r\n            </div>\r\n            <div>\r\n                <input type=\"text\" placeholder=\"Prenom\">\r\n            </div>\r\n            <div>\r\n                <input type=\"text\" id=\"username\" v-model=\"username\" required placeholder=\"Username\">\r\n            </div>\r\n            <div>\r\n                <input type=\"password\" v-model=\"password\" id=\"password\" required placeholder=\"Password\">\r\n            </div>\r\n            <button type='submit' class=\"btn btn-color\">Sign up</button>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      username: undefined,\r\n      password: undefined,\r\n      nom: undefined,\r\n      prenom: undefined\r\n    }\r\n  },\r\n  methods: {\r\n    sendCredentials () {\r\n      const login = this.username\r\n      const password = this.password\r\n      fetch('http://localhost:4000/api/v1/auth/token', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          login,\r\n          password\r\n        })\r\n      })\r\n        .then(res => res.json())\r\n        .then(({ success, token }) => {\r\n          if (success === true) {\r\n            localStorage.setItem('token', token)\r\n            localStorage.setItem('username', this.username)\r\n            console.log('success')\r\n            window.location.replace('/')\r\n          }\r\n        })\r\n        .catch(error => { this.error = error })\r\n    },\r\n    signUp () {\r\n      const login = this.username\r\n      const password = this.password\r\n      const firstname = this.prenom\r\n      const lastname = this\r\n      console.log('begining signing up')\r\n      fetch('http://localhost:4000/api/v1/write', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          login,\r\n          password,\r\n          firstname,\r\n          lastname\r\n        })\r\n      })\r\n        .then(res => res.json())\r\n        .then(({ success }) => {\r\n          if (success) {\r\n            this.sendCredentials()\r\n          }\r\n        })\r\n        .catch(error => { this.error = error })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./SignUp.vue?vue&type=template&id=4c310d7c\"\nimport script from \"./SignUp.vue?vue&type=script&lang=js\"\nexport * from \"./SignUp.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}